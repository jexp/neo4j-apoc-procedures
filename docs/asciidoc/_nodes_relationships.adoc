[[nodes-relationships]]
== Node, Relationship and Path Functions and Procedures

[abstract]
--
This chapter describes node, relationship, and path functions and procedures in the APOC library.
--

Functions and procedures to efficiently find and navigate and dynamically create and update nodes and relationships.

* <<path-functions>>
* <<rel-functions>>
* <<node-functions>>
* <<graph-generators>>

[[path-functions]]
=== Path Functions

[abstract]
--
This section describes functions that can be used to do path operations.
--

Functions to create, combine and split paths

[cols="1m,5"]
|===
| apoc.path.create(startNode,[rels]) | creates a path instance of the given elements
| apoc.path.slice(path, [offset], [length]) | creates a sub-path with the given offset and length
| apoc.path.combine(path1, path2) | combines the paths into one if the connecting node matches
| apoc.path.elements(path) | returns a list of node-relationship-node-...
|===

[[rel-functions]]
=== Relationship Procedures

[abstract]
--
This section describes procedures that can be used to lookup relationships.
--

[cols="1m,5"]
|===
| CALL apoc.get.rels(rel\|id\|[ids]) | quickly returns all relationships with these ids
|===

[[node-functions]]
=== Node Functions and Procedures

[abstract]
--
This section describes functions that can be used to apply different operations to nodes.
--

.Functions
[cols="1m,5"]
|===
| apoc.nodes.isDense(node) | returns true if it is a dense node
| apoc.nodes.connected(start, end, rel-direction-pattern) | returns true when the node is connected to the other node, optimized for dense nodes
| apoc.node.relationship.exists(node, rel-direction-pattern) | returns true when the node has the relationships of the pattern
| apoc.node.relationship.types(node, rel-direction-pattern) | returns a list of distinct relationship types
| apoc.node.degree(node, rel-direction-pattern) | returns total degrees of the given relationships in the pattern, can use `'>'` or `'<'` for all outgoing or incoming relationships
| apoc.node.id(node) | returns id for (virtual) nodes
| apoc.node.degree.in(node, relationshipName) | returns total number of incoming relationship
| apoc.node.degree.out(node, relationshipName) | returns total number of outgoing relationship
| apoc.node.labels(node) | returns labels for (virtual) nodes
| apoc.rel.id(rel) | returns id for (virtual) relationships
| apoc.rel.type(rel) | returns type for (virtual) relationships
| apoc.any.properties(node/rel/map, [[keys]]) | returns properties for virtual and real, nodes, rels and maps, optionally restrict via keys
| apoc.any.property(node/rel/map) | returns property for virtual and real, nodes, rels and maps
| apoc.create.uuid() | returns a UUID string
| apoc.label.exists(element, label) | returns true or false related to label existance
|===

rel-direction-pattern syntax:

`[<]RELATIONSHIP_TYPE1[>]|[<]RELATIONSHIP_TYPE2[>]|...`

Example: `'FRIEND|MENTORS>|<REPORTS_TO'` will match to :FRIEND relationships in either direction, outgoing :MENTORS relationships, and incoming :REPORTS_TO relationships.

.Procedures
[cols="1m,5"]
|===
| CALL apoc.nodes.get(node\|nodes\|id\|[ids]) | quickly returns all nodes with these ids
| CALL apoc.nodes.delete(node\|nodes\|id\|[ids]) | quickly delete all nodes with these ids
|===

[[graph-generators]]
=== Generating Graphs

[abstract]
--
This section describes procedures that can be used to generate example graphs.
--

Generate undirected (random direction) graphs with semi-real random distributions based on theoretical models.

[separator=Â¦,opts=header,cols="1,1m,5"]
|===
include::../../build/generated-documentation/apoc.generate.csv[]
|===

Example

[source,cypher]
----
CALL apoc.generate.ba(1000, 2, 'TestLabel', 'TEST_REL_TYPE')
CALL apoc.generate.ws(1000, null, null, null)
CALL apoc.generate.simple([2,2,2,2], null, null)
----
